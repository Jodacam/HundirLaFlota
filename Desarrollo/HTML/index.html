<html lang="es"> 
<head> 
	<meta charset="UTF-8" />
	<title>Phaser - Making your first game, part 1</title>
	<script type="text/javascript" src="../JavaScript/phaser.js"></script>
    <script type="text/javascript" src="../JavaScript/jquery-3.2.1.js"></script>
    <style type="text/css">
        body {
            margin: 0;
        }
        
    </style>
</head>
<body>
   
    
    
        <canvas id="canvas">
    </canvas>
    <script type = "text/javascript">
        "use strict";

        var contexto = document.getElementById("canvas").getContext("2d");
        //canvas.addEventListener("click", , false);

        const PART_ONE = "Parte1";
        const PART_TWO = "Parte2";
        const WAIT = "Espera";
        var GameState = "";//Estado del juego, (Primera Fase, segunda Fase, Espera)
        
        var lienzo = document.getElementById("canvas");

        function pantallaCompleta() {
            lienzo.width = window.innerWidth;
            lienzo.height = window.innerHeight;

            console.log('Ancho de la pantalla: ' + lienzo.width);
            console.log('Alto de la pantalla: ' + lienzo.height);
        };
        pantallaCompleta();

        var anchura = lienzo.width / 2;
        var anchoTablero = anchura*0.65;
        
        var game = new Phaser.Game(lienzo.width, lienzo.height, Phaser.Canvas, 'phaser-example', { preload: window.onload,create: creation });


        function Celda(x, y) {
            this.posX;
            this.posY;

            this.colorA;
            this.colorB;

            this.pintar = function () {
                contexto.fillStyle = this.colorA;
                contexto.strokeStyle = this.colorB;
                contexto.lineWidth = 5;
                contexto.fillRect((this.posX), (this.posY), anchoTablero / 10, anchoTablero / 10);
                contexto.strokeRect((this.posX), (this.posY), anchoTablero / 10, anchoTablero / 10);
            }
        };

        function CeldaA(x, y){
            Celda.call(this, x, y);

            this.colorA = "#0099FF";
            this.colorB = "#FFFFFF";

            this.offsetX = (lienzo.width) / 2 + 40;
            this.offsetY = (lienzo.height - anchoTablero) / 2;

            this.posX = x + this.offsetX;
            this.posY = y + this.offsetY;
        };

        function CeldaE(x, y){
            Celda.call(this, x, y);

            this.colorA = "#0099FF";
            this.colorB = "#000000";

            this.offsetX = (lienzo.width - anchoTablero * 2) / 2 - 40;
            this.offsetY = (lienzo.height - anchoTablero) / 2;

            this.posX = x + this.offsetX;
            this.posY = y + this.offsetY;
        };

        function Barco(imgSrc, nceldas, x, y) {
           /* var img = new Image();
            img.src = imgSrc;
            */

            game.load.image('Barco', imgSrc);
            
            var sprite;
            this.npartes = nceldas;
            this.partes = new Array(this.npartes);
            this.posX = x;
            this.posY = y;
            this.loadImage = function () {
                sprite = game.add.sprite(100, 100, 'Barco');
            }



        /*    img.onload = function () {
                contexto.drawImage(img, this.posX, this.posY);
            }
            img.onclick = function (e) {
                contexto.drawImage(img, 64, 800);
            }
            */
          /*  this.pintar = function () {
                contexto.drawImage(img,this.posX,this.posY);
            }
            */

        };

        function Tablero() {
            this.tablero = new Array(10);

            for (var i = 0; i < 10; i++)
                this.tablero[i] = new Array(10);

            this.pintar = function(){
                for (var i = 0; i < 10; i++) {
                    for (var j = 0; j < 10; j++) {
                        this.tablero[i][j].pintar();
                    }
                }
            }
        };

        function TableroA(){
            Tablero.call(this);

            this.generar = function(){
                for (var i = 0; i < 10; i++){
                    for (var j = 0; j < 10; j++){
                        this.tablero[i][j] = new CeldaA(i * anchoTablero / 10, j * anchoTablero / 10);
                    }
                }
            }
        };

        function TableroE(){
            Tablero.call(this);

            this.generar = function(){
                for (var i = 0; i < 10; i++){
                    for (var j = 0; j < 10; j++){
                        this.tablero[i][j] = new CeldaE(i * anchoTablero / 10, j * anchoTablero / 10);
                    }
                }
            }
        };
        
        var pruebaBarco ;
        window.onload = function (e) 
        {


            GameState = PART_ONE;
            var tablero = new TableroA();
            tablero.generar();
            tablero.pintar();
            var tablero2 = new TableroE();
            tablero2.generar();
            tablero2.pintar();
          pruebaBarco  = new Barco("images/Barco2Solo.png", 2, 100, 100);          
           

        }


        function creation() {
            var images = game.cache.getKeys(Phaser.Cache.IMAGE);

            pruebaBarco.loadImage();
        }

    </script>
</body>
</html>